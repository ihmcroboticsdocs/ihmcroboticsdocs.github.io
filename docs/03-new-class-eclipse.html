<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Create The ValkyrieDemo Class · IHMC Robotics</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Create The ValkyrieDemo Class · IHMC Robotics"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ihmcroboticsdocs.github.io/index.html"/><meta property="og:description" content="&lt;br/&gt; "/><meta property="og:image" content="https://ihmcroboticsdocs.github.io/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://ihmcroboticsdocs.github.io/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://ihmcroboticsdocs.github.io/blog/atom.xml" title="IHMC Robotics Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://ihmcroboticsdocs.github.io/blog/feed.xml" title="IHMC Robotics Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/running-man-logo.png" alt="IHMC Robotics"/><h2 class="headerTitleWithLogo">IHMC Robotics</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/quickstarthome.html" target="_self">Quick Start</a></li><li class=""><a href="/docs/docshome.html" target="_self">Docs</a></li><li class=""><a href="http://robots.ihmc.us/" target="_self">About</a></li><li class=""><a href="/blog" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Quick Start (Eclipse)</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Quick Start (Eclipse)</h3><ul><li class="navListItem"><a class="navItem" href="/docs/00-pre-reqs-eclipse.html">Prerequisites</a></li><li class="navListItem"><a class="navItem" href="/docs/01-project-eclipse.html">Create your First GradleProject</a></li><li class="navListItem"><a class="navItem" href="/docs/02-setup-gradle-project-eclipse.html">Import GradleProject</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/03-new-class-eclipse.html">Create the ValkyrieDemo Class</a></li><li class="navListItem"><a class="navItem" href="/docs/04-run-valkyrie-eclipse.html">ValkyrieDemo Run Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/05-run-valkyrie-scs-eclipse.html">Run ValkyrieDemo</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Create The ValkyrieDemo Class</h1></header><article><div><span><p><br/></p>
<h3><a class="anchor" aria-hidden="true" id="open-the-java-perspective"></a><a href="#open-the-java-perspective" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Open the Java Perspective</h3>
<p>You'll want to have the Java Perspective open before you create and edit your class.  After importing the Gradle Project you are often left with the Gradle Tasks window open and the Java Perspective minimized. Click the maximize perspective button on the right of the Eclipse IDE window to expand the Java Perspective.</p>
<p><img src="/img/quickstart/eclipseAfterGradleImport.png" alt="Wizard Search"></p>
<p>Once expanded you should see the <code>GradleProject</code> selected on the left and <code>Java</code> on the top right.</p>
<p><img src="/img/quickstart/eclipseJavaPerspective.png" alt="Wizard Search"></p>
<p><br/></p>
<h3><a class="anchor" aria-hidden="true" id="create-a-new-class-to-run-the-valkyrie-simulation"></a><a href="#create-a-new-class-to-run-the-valkyrie-simulation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a New Class to Run the Valkyrie Simulation</h3>
<p>Press <code>Ctrl+N</code> (<code>Cmd+N</code> on OS X) to bring up the &quot;New&quot; wizard, type out &quot;Class&quot; to filter down to the &quot;Class&quot; option, and then click <code>Next</code>.</p>
<p><img src="/img/quickstart/eclipseNewFileWizard.png" alt="Wizard Search"></p>
<p>Java classes are organized by &quot;packages&quot;. Many IHMC packages start with <code>us.ihmc</code>, you can use your organization, a personal website, or whatever you'd like as your package. Here we're going to use <code>us.ihmc.demo</code> as the package, and <code>ValkyrieDemo</code> as the name of the class. Fill out this information and click <code>Finish</code>:</p>
<p><img src="/img/quickstart/eclipseNewClassWizard.png" alt="New Class Wizard"></p>
<p>Fill in the class to look like the following:</p>
<pre><code class="hljs css java"><span class="hljs-keyword">package</span> us.ihmc.demo;

<span class="hljs-keyword">import</span> us.ihmc.avatar.DRCFlatGroundWalkingTrack;
<span class="hljs-keyword">import</span> us.ihmc.avatar.drcRobot.DRCRobotModel;
<span class="hljs-keyword">import</span> us.ihmc.avatar.initialSetup.DRCGuiInitialSetup;
<span class="hljs-keyword">import</span> us.ihmc.avatar.initialSetup.DRCRobotInitialSetup;
<span class="hljs-keyword">import</span> us.ihmc.avatar.initialSetup.DRCSCSInitialSetup;
<span class="hljs-keyword">import</span> us.ihmc.commonWalkingControlModules.desiredHeadingAndVelocity.HeadingAndVelocityEvaluationScriptParameters;
<span class="hljs-keyword">import</span> us.ihmc.commonWalkingControlModules.highLevelHumanoidControl.factories.WalkingProvider;
<span class="hljs-keyword">import</span> us.ihmc.jMonkeyEngineToolkit.GroundProfile3D;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.HumanoidFloatingRootJointRobot;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.SimulationConstructionSet;
<span class="hljs-keyword">import</span> us.ihmc.simulationconstructionset.util.ground.FlatGroundProfile;
<span class="hljs-keyword">import</span> us.ihmc.valkyrie.ValkyrieRobotModel;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ValkyrieDemo</span>
</span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span>
   </span>{
      DRCRobotModel robotModel = <span class="hljs-keyword">new</span> ValkyrieRobotModel(DRCRobotModel.RobotTarget.SCS, <span class="hljs-keyword">false</span>); <span class="hljs-comment">// Construct the Valkyrie robot model for simulation.</span>
      DRCGuiInitialSetup guiInitialSetup = <span class="hljs-keyword">new</span> DRCGuiInitialSetup(<span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>); <span class="hljs-comment">// Helper configuration object for setting up the Simulation GUI</span>
      <span class="hljs-keyword">final</span> <span class="hljs-keyword">double</span> groundHeight = <span class="hljs-number">0.0</span>; <span class="hljs-comment">// No magic numbers!</span>
      GroundProfile3D groundProfile = <span class="hljs-keyword">new</span> FlatGroundProfile(groundHeight); <span class="hljs-comment">// Construct a ground profile</span>

      DRCSCSInitialSetup scsInitialSetup = <span class="hljs-keyword">new</span> DRCSCSInitialSetup(groundProfile, robotModel.getSimulateDT()); <span class="hljs-comment">// Helper configuration object for setting up Simulation Construction Set</span>
      scsInitialSetup.setDrawGroundProfile(<span class="hljs-keyword">true</span>); <span class="hljs-comment">// Make ground profile visible</span>
      scsInitialSetup.setInitializeEstimatorToActual(<span class="hljs-keyword">true</span>); <span class="hljs-comment">// Seed the state estimator with a perfect starting configuration</span>

      <span class="hljs-keyword">double</span> initialYaw = <span class="hljs-number">0.0</span>; <span class="hljs-comment">// No magic numbers!</span>
      DRCRobotInitialSetup&lt;HumanoidFloatingRootJointRobot&gt; robotInitialSetup = robotModel.getDefaultRobotInitialSetup(groundHeight,
                                                                                                                      initialYaw); <span class="hljs-comment">// Helper configuration object for the robot starting configuration</span>

      <span class="hljs-keyword">boolean</span> useVelocityAndHeadingScript = <span class="hljs-keyword">true</span>; <span class="hljs-comment">// No magic... booleans?</span>
      <span class="hljs-keyword">boolean</span> cheatWithGroundHeightAtForFootstep = <span class="hljs-keyword">false</span>; <span class="hljs-comment">// No magic... booleans?</span>

      HeadingAndVelocityEvaluationScriptParameters walkingScriptParameters = <span class="hljs-keyword">new</span> HeadingAndVelocityEvaluationScriptParameters();
      DRCFlatGroundWalkingTrack flatGroundWalkingTrack = <span class="hljs-keyword">new</span> DRCFlatGroundWalkingTrack(robotInitialSetup,
                                                                                       guiInitialSetup, scsInitialSetup, useVelocityAndHeadingScript, cheatWithGroundHeightAtForFootstep,
                                                                                       robotModel, WalkingProvider.VELOCITY_HEADING_COMPONENT, walkingScriptParameters); <span class="hljs-comment">// Construct a Flat Ground Walking Track, a re-usable sim environment we use to validate the basics of the walking algorithm</span>

      SimulationConstructionSet scs = flatGroundWalkingTrack.getSimulationConstructionSet(); <span class="hljs-comment">// Construct the SCS instance</span>
   }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="02-setup-gradle-project-eclipse.html">← Import GradleProject</a><a class="docs-next button" href="04-run-valkyrie-eclipse.html">ValkyrieDemo Run Configuration →</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/running-man-logo.png" alt="IHMC Robotics" width="66" height="58"/></a><div><h5>Docs</h5><a href="https://ihmcroboticsdocs.github.io/docs/quickstarthome.html">Quick Start</a><a href="https://ihmcroboticsdocs.github.io/docs/docshome.html">Software Documentation</a></div><div><h5>Community</h5><a href="https://github.com/ihmcrobotics">GitHub</a><a href="https://www.facebook.com/TheIHMC" target="_blank" rel="noreferrer noopener">Facebook</a><a href="https://twitter.com/ihmcrobotics" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.youtube.com/user/DRCihmcRobotics" target="_blank" rel="noreferrer noopener">YouTube</a></div></section><section class="copyright">Copyright © 2018 IHMC Robotics </section></footer></div></body></html>